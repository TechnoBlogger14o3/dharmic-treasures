const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vendor-QtZcbqfE.js","assets/map-vendor-QQBPBMVJ.js","assets/map-vendor-Dgihpmma.css"])))=>i.map(i=>d[i]);
import{r as f,j as e}from"./react-vendor-UWbajv2v.js";import{_ as D}from"./index-COTdLKRr.js";import"./vendor-QtZcbqfE.js";import"./map-vendor-QQBPBMVJ.js";function z({onSearch:a,placeholder:i="Search..."}){const[t,l]=f.useState(""),c=u=>{const h=u.target.value;l(h),a(h)},o=()=>{l(""),a("")};return e.jsxs("div",{className:"relative animate-fadeIn",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("input",{type:"text",value:t,onChange:c,placeholder:i,className:"w-full pl-10 pr-10 py-3 sm:py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent outline-none bg-white/90 backdrop-blur-sm text-gray-800 text-base sm:text-sm min-h-[44px]"}),t&&e.jsx("button",{onClick:o,className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}let C=null,_=!1,M=null;const E="Xenova/Qwen2.5-0.5B-Instruct";async function R(){if(!C)return _&&M||(_=!0,M=(async()=>{try{const i=(await D(()=>import("./vendor-QtZcbqfE.js").then(t=>t.t),__vite__mapDeps([0,1,2]))).pipeline;C=await i("text-generation",E,{quantized:!0}),_=!1}catch(a){throw _=!1,M=null,new Error(`Failed to initialize LLM: ${a.message}`)}})()),M}async function B(a,i){var t,l,c;try{C||await R();const h=`<|im_start|>system
You are a helpful assistant that explains verses from the Bhagavad Gita. 
You provide clear, insightful explanations that help users understand the spiritual wisdom.
Always be respectful, accurate, and encouraging.
When relevant verses are provided, reference them naturally in your response.
Keep responses concise (2-3 sentences) and focused.<|im_end|>
<|im_start|>user
Context from Bhagavad Gita:
${i.slice(0,5).map(g=>`Chapter ${g.chapter} (${g.chapterName}), Verse ${g.verse}:
${g.meaning}`).join(`

`)}

User Question: ${a}

Provide a helpful response that explains the relevant verses and answers the user's question:<|im_end|>
<|im_start|>assistant
`,v=((t=(await C(h,{max_new_tokens:200,temperature:.7,top_p:.9,do_sample:!0}))[0])==null?void 0:t.generated_text)||"",w=((c=(l=v.split("<|im_start|>assistant")[1])==null?void 0:l.split("<|im_end|>")[0])==null?void 0:c.trim())||v.trim();return w?{text:w}:{text:"",error:"Empty response from LLM"}}catch(o){return console.error("LLM generation error:",o),{text:"",error:`LLM error: ${o.message}. Falling back to keyword search.`}}}function A(){return C!==null}function P(){return"gpu"in navigator}function q(){return{name:E,supportsWebGPU:P(),isInitialized:A()}}const G=Object.freeze(Object.defineProperty({__proto__:null,generateLLMResponse:B,getModelInfo:q,isLLMAvailable:A,supportsWebGPU:P},Symbol.toStringTag,{value:"Module"})),K={stress:["anxiety","worry","fear","trouble","difficulty","sorrow","grief","distress","tension","pressure","strain"],duty:["dharma","responsibility","obligation","work","action","karma","righteousness","purpose","calling"],happiness:["joy","peace","bliss","contentment","satisfaction","delight","pleasure","cheer","gladness"],death:["mortality","afterlife","soul","spirit","rebirth","reincarnation","moksha","liberation","immortality"],anger:["rage","wrath","fury","irritation","temper","resentment","hostility","annoyance"],karma:["action","deed","work","consequence","result","fate","destiny","deeds","activities"],meditation:["yoga","contemplation","concentration","mindfulness","dhyana","samadhi","practice","sadhana"],love:["devotion","affection","compassion","bhakti","attachment","care","kindness","mercy"],knowledge:["wisdom","understanding","insight","jnana","awareness","learning","education","enlightenment"],detachment:["renunciation","non-attachment","vairagya","indifference","dispassion","unattached"],self:["soul","atman","self","ego","identity","individual","person","being"],god:["krishna","lord","divine","supreme","brahman","ishvara","deity","almighty","creator"],path:["way","method","practice","yoga","marga","route","approach","technique"],mind:["thought","consciousness","intellect","buddhi","manas","mental","thinking","awareness"],control:["discipline","restraint","mastery","regulation","self-control","willpower","restraint"],peace:["tranquility","calm","serenity","shanti","quiet","stillness","harmony"],success:["achievement","victory","triumph","accomplishment","prosperity","wealth"],failure:["defeat","loss","mistake","error","defeat","downfall"],guidance:["direction","advice","counsel","instruction","teaching","guidance"],purpose:["meaning","goal","aim","objective","intention","reason"],suffering:["pain","misery","agony","torment","hardship","adversity"],devotion:["worship","prayer","bhakti","faith","dedication","surrender"]},L=a=>a.toLowerCase().trim().replace(/\s+/g," ");function O(a){const i=L(a),t=new Set([i]);for(const[l,c]of Object.entries(K)){i.includes(l)&&c.forEach(o=>t.add(o));for(const o of c)i.includes(o)&&(t.add(l),c.forEach(u=>t.add(u)))}return[...t]}function V(a){const i=[];return a.forEach(t=>{const l=L(t.summary),c=L(t.name_meaning);t.verses.forEach(o=>{i.push({verse:o,chapter:t,textLower:L(o.text),transliterationLower:L(o.transliteration),meaningLower:L(o.meaning),hindiMeaningLower:L(o.hindi_meaning),chapterSummaryLower:l,chapterNameLower:c})})}),i}function Q(a,i){const t=L(a),l=O(t),c=t.split(" ").filter(h=>h.length>2),o=t.length>2?new RegExp(`\\b${t.replace(/\s+/g,"\\s+")}\\b`,"i"):null,u=[];for(const h of i){let n=0;const{verse:v,chapter:w,textLower:g,transliterationLower:d,meaningLower:m,hindiMeaningLower:j,chapterSummaryLower:k,chapterNameLower:N}=h;m.includes(t)&&(n+=150),j.includes(t)&&(n+=120),(N.includes(t)||k.includes(t))&&(n+=80),o&&(o.test(m)&&(n+=50),o.test(j)&&(n+=40));for(const p of l)m.includes(p)&&(n+=15),j.includes(p)&&(n+=12),k.includes(p)&&(n+=8),N.includes(p)&&(n+=10);for(const p of c)p.length>3?(m.includes(p)&&(n+=8),j.includes(p)&&(n+=6)):(m.includes(p)&&(n+=4),j.includes(p)&&(n+=3)),d.includes(p)&&(n+=3),g.includes(p)&&(n+=2),k.includes(p)&&(n+=4);n>0&&u.push({verse:v,chapter:w,score:n})}return u.sort((h,n)=>n.score-h.score).slice(0,7)}function F(a,i){return Q(a,i).map(({verse:l,chapter:c})=>({chapter:c.chapter_number,verse:l.verse_number,meaning:l.meaning,chapterName:c.name_meaning,verseId:l.id}))}function H({chapters:a,onNavigateToVerse:i}){const[t,l]=f.useState(!1),[c,o]=f.useState(!1),[u,h]=f.useState(!1),[n,v]=f.useState("idle"),[w,g]=f.useState([{type:"bot",content:"Namaste! ðŸ™ I am the Gita Chatbot. Ask me questions about life, duty, karma, stress, happiness, or any topic, and I will find relevant verses from the Bhagavad Gita for you."}]),[d,m]=f.useState(""),j=f.useRef(null),k=f.useMemo(()=>V(a),[a]);f.useEffect(()=>{u&&n==="idle"&&(v("initializing"),D(()=>Promise.resolve().then(()=>G),void 0).then(async r=>{try{r.isLLMAvailable()||await r.generateLLMResponse("test",[]),v("ready")}catch(y){console.error("LLM initialization error:",y),v("error"),h(!1)}}).catch(r=>{console.error("Failed to load LLM:",r),v("error"),h(!1)}))},[u,n]),f.useEffect(()=>{var r;(r=j.current)==null||r.scrollIntoView({behavior:"smooth"})},[w]);const N=async()=>{if(!d.trim()||c)return;const r={type:"user",content:d};g(x=>[...x,r]);const y=d;m(""),o(!0);const s=F(y,k),I=s.map(x=>({chapter:x.chapter,verse:x.verse,meaning:x.meaning,chapterName:x.chapterName})),W={type:"loading",content:u&&n==="ready"?"Generating AI response...":"Searching the Bhagavad Gita..."};g(x=>[...x,W]);try{let x="";if(u&&n==="ready"&&s.length>0)try{const b=await B(y,I);b.text&&!b.error?x=b.text:x=s.length>0?`I found ${s.length} relevant verse${s.length>1?"s":""} from the Bhagavad Gita. Click on any verse to read it in detail:`:`I couldn't find specific verses matching "${y}". Try asking about:

â€¢ Duty and Dharma
â€¢ Karma and Actions
â€¢ Stress and Worry
â€¢ Happiness and Peace
â€¢ Meditation and Yoga
â€¢ Detachment and Renunciation
â€¢ Knowledge and Wisdom
â€¢ Devotion and Bhakti

Or rephrase your question with different words.`}catch(b){console.error("LLM error:",b),x=s.length>0?`I found ${s.length} relevant verse${s.length>1?"s":""} from the Bhagavad Gita. Click on any verse to read it in detail:`:`I couldn't find specific verses matching "${y}". Try asking about:

â€¢ Duty and Dharma
â€¢ Karma and Actions
â€¢ Stress and Worry
â€¢ Happiness and Peace
â€¢ Meditation and Yoga
â€¢ Detachment and Renunciation
â€¢ Knowledge and Wisdom
â€¢ Devotion and Bhakti

Or rephrase your question with different words.`}else x=s.length>0?`I found ${s.length} relevant verse${s.length>1?"s":""} from the Bhagavad Gita. Click on any verse to read it in detail:`:`I couldn't find specific verses matching "${y}". Try asking about:

â€¢ Duty and Dharma
â€¢ Karma and Actions
â€¢ Stress and Worry
â€¢ Happiness and Peace
â€¢ Meditation and Yoga
â€¢ Detachment and Renunciation
â€¢ Knowledge and Wisdom
â€¢ Devotion and Bhakti

Or rephrase your question with different words.`;g(b=>b.filter($=>$.type!=="loading"));const S={type:"bot",content:x,verses:s.length>0?s:void 0};g(b=>[...b,S])}catch(x){console.error("Error generating response:",x),g(b=>b.filter($=>$.type!=="loading"));const S={type:"bot",content:s.length>0?`I found ${s.length} relevant verse${s.length>1?"s":""} from the Bhagavad Gita. Click on any verse to read it in detail:`:`I couldn't find specific verses matching "${y}". Try asking about:

â€¢ Duty and Dharma
â€¢ Karma and Actions
â€¢ Stress and Worry
â€¢ Happiness and Peace
â€¢ Meditation and Yoga
â€¢ Detachment and Renunciation
â€¢ Knowledge and Wisdom
â€¢ Devotion and Bhakti

Or rephrase your question with different words.`,verses:s.length>0?s:void 0};g(b=>[...b,S])}finally{o(!1)}},p=r=>{r.key==="Enter"&&!r.shiftKey&&(r.preventDefault(),N())};return e.jsxs(e.Fragment,{children:[!t&&e.jsx("button",{onClick:()=>l(!0),className:"fixed bottom-20 sm:bottom-6 right-4 sm:right-6 bg-amber-500 text-white rounded-full p-4 shadow-lg hover:bg-amber-600 active:bg-amber-700 transition-all duration-300 z-50 animate-pulse-slow hover:animate-none touch-manipulation min-w-[56px] min-h-[56px] flex items-center justify-center","aria-label":"Open Chatbot",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),t&&e.jsxs("div",{className:"fixed inset-0 sm:inset-auto sm:bottom-6 sm:right-6 sm:w-96 sm:h-[600px] sm:rounded-xl bg-white shadow-2xl flex flex-col z-50 border-0 sm:border border-gray-200",children:[e.jsxs("div",{className:"bg-amber-500 text-white p-4 sm:rounded-t-xl flex items-center justify-between flex-shrink-0",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-base sm:text-lg",children:"Gita Chatbot"}),e.jsx("p",{className:"text-xs text-amber-100",children:u&&n==="ready"?"ðŸ¤– AI-Powered":"Ask me anything"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>{h(!u)},className:`text-white hover:text-amber-100 active:text-amber-200 transition-colors p-2 touch-manipulation min-w-[44px] min-h-[44px] flex items-center justify-center ${u&&n==="ready"?"opacity-100":"opacity-70"}`,"aria-label":"Toggle AI Mode",title:u?"AI Mode Enabled":"Enable AI Mode (requires model download)",children:n==="initializing"?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}):e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),e.jsx("button",{onClick:()=>l(!1),className:"text-white hover:text-amber-100 active:text-amber-200 transition-colors p-2 -mr-2 touch-manipulation min-w-[44px] min-h-[44px] flex items-center justify-center","aria-label":"Close Chatbot",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50",children:[w.map((r,y)=>e.jsx("div",{className:`flex ${r.type==="user"?"justify-end":"justify-start"} animate-fadeIn`,style:{animationDelay:`${y*.1}s`},children:e.jsx("div",{className:`max-w-[80%] rounded-lg p-3 ${r.type==="user"?"bg-amber-500 text-white":"bg-white text-gray-800 shadow-sm border border-gray-200"}`,children:r.type==="loading"?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-amber-500 border-t-transparent"}),e.jsx("p",{className:"text-sm text-gray-600",children:r.content})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:r.content}),r.verses&&r.verses.length>0&&e.jsx("div",{className:"mt-3 space-y-2",children:r.verses.map((s,I)=>e.jsxs("div",{onClick:()=>{i&&(l(!1),i(s.chapter,s.verse))},className:`bg-amber-50 border border-amber-200 rounded p-2 text-xs ${i?"cursor-pointer hover:bg-amber-100 hover:border-amber-300 transition-colors":""}`,children:[e.jsxs("div",{className:"font-semibold text-amber-700 mb-1",children:["Chapter ",s.chapter,": ",s.chapterName," - Verse ",s.verse,i&&e.jsx("span",{className:"ml-2 text-amber-600 text-[10px]",children:"(Click to read)"})]}),e.jsx("div",{className:"text-gray-700",children:s.meaning})]},I))})]})})},y)),e.jsx("div",{ref:j})]}),e.jsx("div",{className:"p-3 sm:p-4 border-t border-gray-200 bg-white sm:rounded-b-xl flex-shrink-0",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:d,onChange:r=>m(r.target.value),onKeyPress:p,placeholder:"Ask a question...",className:"flex-1 px-3 sm:px-4 py-2.5 sm:py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent outline-none text-sm min-h-[44px]"}),e.jsx("button",{onClick:N,className:"bg-amber-500 text-white px-4 py-2.5 sm:py-2 rounded-lg hover:bg-amber-600 active:bg-amber-700 transition-colors touch-manipulation min-w-[44px] min-h-[44px] flex items-center justify-center","aria-label":"Send message",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})})]})]})}function J({chapters:a,textName:i,textNameHindi:t,onChapterSelect:l,textType:c,hasPDF:o,onViewPDF:u}){const[h,n]=f.useState(""),[v,w]=f.useState(a);f.useEffect(()=>{w(a),n("")},[a,c]);const g=d=>{if(n(d),!d.trim()){w(a);return}const m=d.toLowerCase(),j=a.filter(k=>{const N=k.name.toLowerCase().includes(m),p=k.name_meaning.toLowerCase().includes(m),r=k.summary.toLowerCase().includes(m),y=k.verses.some(s=>s.text.toLowerCase().includes(m)||s.transliteration.toLowerCase().includes(m)||s.meaning.toLowerCase().includes(m)||s.hindi_meaning.toLowerCase().includes(m));return N||p||r||y});w(j)};return e.jsxs("div",{className:"container mx-auto px-3 sm:px-4 py-6 sm:py-8",children:[e.jsxs("div",{className:"text-center mb-6 sm:mb-8 animate-fadeIn",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-6xl font-bold text-gray-800 mb-2",children:t}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl lg:text-2xl text-gray-600 mb-4",children:i}),o&&u&&e.jsxs("button",{onClick:u,className:"inline-flex items-center gap-2 px-4 sm:px-6 py-2 sm:py-3 bg-amber-500 text-white rounded-lg font-medium hover:bg-amber-600 active:bg-amber-700 transition-all duration-200 shadow-md hover:shadow-lg touch-manipulation",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),e.jsxs("span",{className:"text-sm sm:text-base",children:["View ",i," in PDF"]})]})]}),c==="gita"&&e.jsx("div",{className:"max-w-2xl mx-auto mb-6 sm:mb-8 px-2 sm:px-0",children:e.jsx(z,{onSearch:g,placeholder:`Search ${i}...`})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6 max-w-7xl mx-auto",children:v.map((d,m)=>e.jsx("div",{onClick:()=>l(d.chapter_number),className:"bg-white/90 backdrop-blur-sm rounded-xl shadow-lg hover:shadow-2xl active:scale-95 transition-all duration-300 cursor-pointer touch-manipulation border border-gray-200 p-4 sm:p-6 animate-fadeIn",style:{animationDelay:`${m*.05}s`},children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-amber-600 mb-2",children:d.chapter_number}),e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-800 mb-2",children:d.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-2 sm:mb-3",children:d.name_meaning}),e.jsx("p",{className:"text-xs text-gray-500 mb-2 line-clamp-2",children:d.summary}),e.jsxs("div",{className:"text-xs text-amber-600 font-medium",children:[d.verses_count," ",d.verses_count===1?"verse":"verses"]})]})},d.id))}),v.length===0&&e.jsx("div",{className:"text-center py-12",children:e.jsxs("p",{className:"text-gray-500 text-lg",children:['No chapters found matching "',h,'"']})}),c==="gita"&&e.jsx(H,{chapters:a,onNavigateToVerse:(d,m)=>{l(d,m)}})]})}export{J as default};
