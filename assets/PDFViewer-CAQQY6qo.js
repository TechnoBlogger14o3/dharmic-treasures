import{r as o,j as e,D as L,P as E,G as D}from"./react-vendor-UWbajv2v.js";import{A as W,C as F,a as S}from"./ChevronRightIcon-C1qTiFYc.js";import"./vendor-QtZcbqfE.js";import"./map-vendor-QQBPBMVJ.js";const b="/dharmic-treasures/pdf.worker.min.mjs";D.workerSrc=b;console.log("PDF.js worker path:",b);function R({pdfPath:f,title:v,titleHindi:j,onBack:N}){const[a,w]=o.useState(0),[t,h]=o.useState(1),[y,c]=o.useState(800),[i,u]=o.useState(!0),[p,g]=o.useState(null),m=`/dharmic-treasures/${f}`.replace(/\/\//g,"/");o.useEffect(()=>{const s=()=>{const r=window.innerWidth,n=32,l=900;r<640?c(r-n):r<1024?c(Math.min(r-n,l)):c(l)};return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]);const k=s=>{w(s.numPages),u(!1),g(null)},P=s=>{console.error("PDF load error:",s),console.error("PDF path:",m);const r=s.message||"Unknown error";g(`Failed to load PDF: ${r}. Please check if the file exists.`),u(!1)},d=()=>{t>1&&h(t-1)},x=()=>{t<a&&h(t+1)},C=s=>{if(i)return;const r=s.currentTarget,n=s.clientX-r.getBoundingClientRect().left,l=r.offsetWidth;n<l*.4?d():x()};return e.jsxs("div",{className:"container mx-auto px-3 sm:px-4 py-4 sm:py-6 md:py-8 max-w-6xl animate-fadeIn pb-20 sm:pb-8",children:[e.jsxs("div",{className:"mb-4 sm:mb-6",children:[e.jsxs("button",{onClick:N,className:"flex items-center gap-2 text-gray-700 hover:text-amber-600 active:text-amber-700 transition-all duration-300 mb-3 sm:mb-4 py-2 -ml-2 pl-2 pr-4 rounded-lg touch-manipulation animate-slideInLeft",children:[e.jsx(W,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("span",{className:"text-sm sm:text-base",children:"Back"})]}),e.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-xl shadow-lg p-4 sm:p-6 border border-gray-200 animate-scaleIn",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-gray-800 mb-2",children:j}),e.jsx("p",{className:"text-base sm:text-lg text-gray-600",children:v})]})})]}),e.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-xl shadow-lg p-4 sm:p-6 border border-gray-200 mb-4 sm:mb-6",children:p?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-red-500 text-lg mb-2",children:"Error"}),e.jsx("div",{className:"text-sm text-gray-600",children:p}),e.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["Path: ",m]})]})}):e.jsx("div",{className:"flex flex-col items-center",children:e.jsx("div",{className:"mb-4 relative cursor-pointer",onClick:C,children:e.jsx(L,{file:m,onLoadSuccess:k,onLoadError:P,loading:e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"spinner-pulse",children:e.jsxs("svg",{className:"w-12 h-12 text-amber-500",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})}),e.jsx("div",{className:"animate-pulse-slow text-amber-500 text-lg mb-2",children:"Loading PDF..."}),e.jsx("div",{className:"text-sm text-gray-500",children:"Please wait"})]})}),children:a>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative",children:[e.jsx(E,{pageNumber:t,width:y,renderTextLayer:!0,renderAnnotationLayer:!0,className:"shadow-2xl"}),e.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-[40%] opacity-0 hover:opacity-5 bg-blue-400 transition-opacity duration-200",style:{pointerEvents:t>1?"auto":"none",cursor:t>1?"w-resize":"default"},onClick:s=>{s.stopPropagation(),t>1&&d()},title:"Click to go to previous page"}),e.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-[60%] opacity-0 hover:opacity-5 bg-green-400 transition-opacity duration-200",style:{pointerEvents:t<a?"auto":"none",cursor:t<a?"e-resize":"default"},onClick:s=>{s.stopPropagation(),t<a&&x()},title:"Click to go to next page"})]}),e.jsxs("div",{className:"text-sm sm:text-base text-gray-600 font-medium mb-4 mt-4",children:["Page ",t," of ",a,e.jsx("span",{className:"text-xs text-gray-400 ml-2 block sm:inline",children:"(Tap left/right side to turn page)"})]})]})})})})}),e.jsxs("div",{className:"fixed bottom-0 left-0 right-0 sm:relative sm:bottom-auto sm:left-auto sm:right-auto flex items-center justify-between bg-white/95 backdrop-blur-md sm:bg-white/90 sm:backdrop-blur-sm rounded-t-xl sm:rounded-xl shadow-lg sm:shadow-lg p-3 sm:p-4 border-t sm:border border-gray-200 animate-slideInRight z-40",children:[e.jsxs("button",{onClick:d,disabled:t===1||i,className:`flex items-center gap-1.5 sm:gap-2 px-3 sm:px-4 py-2.5 sm:py-2 rounded-lg font-medium transition-all duration-200 touch-manipulation min-h-[44px] transform hover:scale-105 active:scale-95 ${t===1||i?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-amber-500 text-white hover:bg-amber-600 active:bg-amber-700 shadow-md hover:shadow-lg"}`,children:[e.jsx(F,{className:"w-5 h-5 flex-shrink-0 transition-transform duration-200 group-hover:-translate-x-1"}),e.jsx("span",{className:"text-sm sm:text-base",children:"Previous"})]}),e.jsxs("div",{className:"text-xs sm:text-sm text-gray-600 font-medium px-2",children:[t," / ",a||"..."]}),e.jsxs("button",{onClick:x,disabled:t===a||i,className:`flex items-center gap-1.5 sm:gap-2 px-3 sm:px-4 py-2.5 sm:py-2 rounded-lg font-medium transition-all duration-200 touch-manipulation min-h-[44px] transform hover:scale-105 active:scale-95 ${t===a||i?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-amber-500 text-white hover:bg-amber-600 active:bg-amber-700 shadow-md hover:shadow-lg"}`,children:[e.jsx("span",{className:"text-sm sm:text-base",children:"Next"}),e.jsx(S,{className:"w-5 h-5 flex-shrink-0 transition-transform duration-200 group-hover:translate-x-1"})]})]})]})}export{R as default};
